<launch>
  <arg name="robot_id" default="$(env MKMR_ROBOT_ID)"/>
  <arg name="publish_covariance" default="true"/>

  <group if="$(arg publish_covariance)">
    <param name="laser_scan_matcher_node/do_compute_covariance" value="1"/>
    <param name="laser_scan_matcher_node/publish_pose_with_covariance" value="true"/>
    <param name="laser_scan_matcher_node/publish_pose_with_covariance_stamped" value="true"/>
  </group>


  <node pkg="laser_scan_matcher" type="laser_scan_matcher_node" name="laser_scan_matcher_node" output="screen">

    <param name="publish_tf" value="true"/>

    <param name="max_iterations" value="10"/>
    <param name="do_compute_covariance" value="1"/>
    <param name="fixed_frame" value = "$(arg robot_id)/odom"/>
    <param name="base_frame" value="$(arg robot_id)/base_footprint"/>
    <param name="use_imu" value="false"/>
    <param name="use_odom" value="true"/>
    <param name="max_iterations" value="10"/>

    <remap from="odom" to="mkmr_controller/odom"/>

   
  </node>
  
</launch>